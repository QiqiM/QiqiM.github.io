---
layout: _post
title: 常见排序算法1-冒泡排序
date: 2019-6-12 10:37:10
tags: [algorithm, sort]
---


### 算法原理

　　冒泡排序(Bubble Sort，也叫泡沫排序或气泡排序)，是一种简单的排序算法。它重复的走访过要排序的数列，一次比较两个元素，如果他们的顺序错误，将元素位置对调。走访数列的工作是重复进行的，直到再没有需要交换的数据，该数列排序完成。

　　冒泡排序算法的流程如下：
- 1. 比较相邻的元素。如果第一个元素大于第二个元素，就交换他们两个。
- 2. 对每一对相邻元素做同样的工作，从开始第一对到结尾的最后一对。在这一点，最后的元素应该会是最大的数
- 3. 针对所有的元素重复以上的步骤，除了最后一个元素（到最后一个元素，已经排好序了）
- 4. 持续每次对越来越少的元素重复上面的步骤，直到没有任何一对数字需要比较。

### 实例分析

以数组arr = [5,2,6,9,3]为例说明，加粗的数字表示每次循环要比较的两个数字：

第一次外循环
    ( **5** **2** 6 9 3 ) ==> ( **2** **5** 6 9 3 )  |  5 > 2 交换位置
    ( 2 **5** **6** 9 3 ) ==> ( 2 **5** **6** 9 3 )  |  5 < 6 位置不变
    ( 2 5 **6** **9** 3 ) ==> ( 2 5 **6** **9** 3 )  |  6 < 9 位置不变
    ( 2 5 6 **9** **3** ) ==> ( 2 5 6 **3** **9** )  |  9 > 3 交换位置

第二次外循环
    ( **2** **5** 6 3 9 ) ==> ( **2** **5** 6 3 9 )  |  2 < 3 位置不变
    ( 2 **5** **6** 3 9 ) ==> ( 2 **5** **6** 3 9 )  |  5 < 6 位置不变
    ( 2 5 **6** **3** 9 ) ==> ( 2 5 **3** **6** 9 )  |  6 > 3 交换位置

第三次外循环
    ( **2** **5** 3 6 9 ) ==> ( **2** **5** 3 6 9 )  |  2 < 5 位置不变
    ( 2 **5** **3** 6 9 ) ==> ( 2 **3** **5** 6 9 )  |  5 > 3 交换位置

第四次外循环（观察一下，其实此时已经排完序了，但是程序并不知道，所以仍要进行后续循环，直到剩余的序列为1）
   ( **2** **3** 5 6 9 ) ==> ( **2** **3** 5 6 9 )  |  2 < 5 位置不变

###  javaScript实现

```js
let testArr = [5,2,6,9,3];

function bubbleSort1(arr){
    let i,j,temp,l = arr.length;

    for(i = l- 1; i > 0;i--){
        for(j = 0; j < i;j++){
            if(arr[j] > arr[j + 1]){
                temp = arr[j];
                arr[j] = arr[j + 1];
                arr[j + 1] = temp;
            }
        }
    }
}

bubbleSort1(testArr);
console.log(testArr);   // [ 2, 3, 5, 6, 9 ]

```

观察上面冒泡排序的流程，不需要到最后一步，就排序完成了，后面的循环就浪费了，可以设置个flag来使它的效率更高一些：添加一个标记，如果一趟遍历中发生了变换，则标记为true,否则为false.如果一趟没有发生交换，说明排序已经完成。

### 冒泡排序优化

```js
function bubbleSort2(arr){
    let i,j,temp,l = arr.length;
    let flag = 0;   // 初始化flag为0

    for(i = l- 1; i > 0;i--){
        for(j = 0; j < i;j++){
            if(arr[j] > arr[j + 1]){
                temp = arr[j];
                arr[j] = arr[j + 1];
                arr[j + 1] = temp;

                flag = 1;   // 若发生交换，则标记为1
            }
        }

        if(flag === 0)
            break;        // 若没有发生交换，则说明数列已经有序
    }
}

bubbleSort2(testArr);
console.log(testArr);   // [ 2, 3, 5, 6, 9 ]
```